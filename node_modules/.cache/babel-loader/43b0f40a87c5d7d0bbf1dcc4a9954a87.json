{"ast":null,"code":"import _slicedToArray from \"/Users/mariannebourcier/werun/react-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\n/* eslint-disable no-unused-vars */\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { atom, useSetRecoilState, useRecoilValue, useRecoilState } from \"recoil\";\nimport { recoilPersist } from 'recoil-persist'; //hook for getting runs\n//hook for logged in user\n//hook for runner only runs\n//hook for planner runs\n//axios route change based on user id\n// Used to persist global app state after manual refreshes.\n// See key in local storage for browser\n\nvar _recoilPersist = recoilPersist(),\n    persistAtom = _recoilPersist.persistAtom;\n\nexport var userState = atom({\n  key: \"userState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom]\n});\nexport var runsState = atom({\n  key: \"runsState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom]\n});\nexport var runnerRunsState = atom({\n  key: \"runnerRunsState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom]\n});\nexport var plannerRunsState = atom({\n  key: \"plannerRunsState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom]\n});\nexport default function useAppData() {\n  var _useRecoilState = useRecoilState(runsState),\n      _useRecoilState2 = _slicedToArray(_useRecoilState, 2),\n      runs = _useRecoilState2[0],\n      setRuns = _useRecoilState2[1];\n\n  var _useRecoilState3 = useRecoilState(runnerRunsState),\n      _useRecoilState4 = _slicedToArray(_useRecoilState3, 2),\n      runnerRuns = _useRecoilState4[0],\n      setRunnerRuns = _useRecoilState4[1];\n\n  var _useRecoilState5 = useRecoilState(plannerRunsState),\n      _useRecoilState6 = _slicedToArray(_useRecoilState5, 2),\n      plannerRuns = _useRecoilState6[0],\n      setPlannerRuns = _useRecoilState6[1];\n\n  var _useRecoilState7 = useRecoilState(userState),\n      _useRecoilState8 = _slicedToArray(_useRecoilState7, 2),\n      user = _useRecoilState8[0],\n      setUser = _useRecoilState8[1];\n\n  useEffect(function () {\n    Promise.all([axios.get(\"/api/runs\")]).then(function (response) {\n      var runs = response[0].data.runs;\n      setRuns(runs);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  useEffect(function () {\n    if (user) {\n      Promise.all([axios.get(\"/api/runs/runner/\".concat(user.id)), axios.get(\"/api/runs/planner/\".concat(user.id))]).then(function (response) {\n        var runnerRuns = response[0].data.runnerRuns;\n        var plannerRuns = response[1].data.plannerRuns;\n        setRunnerRuns(runnerRuns);\n        setPlannerRuns(plannerRuns);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, [user]);\n\n  function login(email, password) {\n    return axios.post(\"/api/login\", {\n      email: email,\n      password: password\n    }).then(function (response) {\n      var user = response.data.user;\n      setUser(user);\n      return true;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  function logout() {\n    return axios.post(\"/api/logout\").then(function () {\n      setUser(null);\n      setRunnerRuns(null);\n      setPlannerRuns(null);\n      return null;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  return {\n    login: login,\n    logout: logout\n  };\n}","map":{"version":3,"names":["axios","React","useState","useEffect","atom","useSetRecoilState","useRecoilValue","useRecoilState","recoilPersist","persistAtom","userState","key","default","effects_UNSTABLE","runsState","runnerRunsState","plannerRunsState","useAppData","runs","setRuns","runnerRuns","setRunnerRuns","plannerRuns","setPlannerRuns","user","setUser","Promise","all","get","then","response","data","catch","error","console","log","id","login","email","password","post","logout"],"sources":["/Users/mariannebourcier/werun/react-front-end/src/hooks/useAppData.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  atom,\n  useSetRecoilState,\n  useRecoilValue,\n  useRecoilState,\n} from \"recoil\";\nimport { recoilPersist } from 'recoil-persist'\n\n//hook for getting runs\n//hook for logged in user\n//hook for runner only runs\n//hook for planner runs\n//axios route change based on user id\n\n// Used to persist global app state after manual refreshes.\n// See key in local storage for browser\nconst { persistAtom } = recoilPersist();\n\nexport const userState = atom({\n  key: \"userState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom],\n});\n\nexport const runsState = atom({\n  key: \"runsState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom],\n});\n\nexport const runnerRunsState = atom({\n  key: \"runnerRunsState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom],\n});\n\nexport const plannerRunsState = atom({\n  key: \"plannerRunsState\",\n  default: null,\n  effects_UNSTABLE: [persistAtom],\n});\n\nexport default function useAppData() {\n  const [runs, setRuns] = useRecoilState(runsState);\n  const [runnerRuns, setRunnerRuns] = useRecoilState(runnerRunsState);\n  const [plannerRuns, setPlannerRuns] = useRecoilState(plannerRunsState);\n  const [user, setUser] = useRecoilState(userState);\n\n  useEffect(() => {\n    Promise.all([axios.get(\"/api/runs\")])\n      .then((response) => {\n        const { runs } = response[0].data;\n        setRuns(runs);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      Promise.all([\n        axios.get(`/api/runs/runner/${user.id}`),\n        axios.get(`/api/runs/planner/${user.id}`),\n      ])\n        .then((response) => {\n          const { runnerRuns } = response[0].data;\n          const { plannerRuns } = response[1].data;\n          setRunnerRuns(runnerRuns);\n          setPlannerRuns(plannerRuns);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  }, [user]);\n\n  function login(email, password) {\n    return axios\n      .post(\"/api/login\", { email, password })\n      .then((response) => {\n        const { user } = response.data;\n        setUser(user);\n        return true;\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function logout() {\n    return axios\n      .post(\"/api/logout\")\n      .then(() => {\n        setUser(null);\n        setRunnerRuns(null);\n        setPlannerRuns(null);\n        return null;\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  return {\n    login,\n    logout,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}