{"ast":null,"code":"import _slicedToArray from \"/Users/mariannebourcier/werun/react-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\n/* eslint-disable no-unused-vars */\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { atom, useSetRecoilState, useRecoilValue, useRecoilState } from \"recoil\"; //hook for getting runs\n//hook for logged in user\n//hook for runner only runs\n//hook for planner runs\n//axios route change based on user id\n\nexport var userState = atom({\n  key: \"userState\",\n  default: null\n});\nexport var runsState = atom({\n  key: \"runsState\",\n  default: null\n});\nexport var runnerRunsState = atom({\n  key: \"runnerRunsState\",\n  default: null\n});\nexport var plannerRunsState = atom({\n  key: \"plannerRunsState\",\n  default: null\n});\nexport default function useAppData() {\n  var _useRecoilState = useRecoilState(runsState),\n      _useRecoilState2 = _slicedToArray(_useRecoilState, 2),\n      runs = _useRecoilState2[0],\n      setRuns = _useRecoilState2[1];\n\n  var _useRecoilState3 = useRecoilState(runnerRunsState),\n      _useRecoilState4 = _slicedToArray(_useRecoilState3, 2),\n      runnerRuns = _useRecoilState4[0],\n      setRunnerRuns = _useRecoilState4[1];\n\n  var _useRecoilState5 = useRecoilState(plannerRunsState),\n      _useRecoilState6 = _slicedToArray(_useRecoilState5, 2),\n      plannerRuns = _useRecoilState6[0],\n      setPlannerRuns = _useRecoilState6[1];\n\n  var _useRecoilState7 = useRecoilState(userState),\n      _useRecoilState8 = _slicedToArray(_useRecoilState7, 2),\n      user = _useRecoilState8[0],\n      setUser = _useRecoilState8[1];\n\n  useEffect(function () {\n    Promise.all([axios.get(\"/api/runs\")]).then(function (response) {\n      var runs = response[0].data.runs;\n      console.log(runs);\n      setRuns(runs);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  useEffect(function () {\n    if (user) {\n      Promise.all([axios.get(\"/api/runs/runner/\".concat(user.id)), axios.get(\"/api/runs/planner/\".concat(user.id))]).then(function (response) {\n        var runnerRuns = response[0].data.runnerRuns;\n        var plannerRuns = response[1].data.plannerRuns;\n        setRunnerRuns(runnerRuns);\n        setPlannerRuns(plannerRuns);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, [user]);\n\n  function login(email, password) {\n    axios.post(\"/api/login\", {\n      email: email,\n      password: password\n    }).then(function (response) {\n      var user = response.data.user;\n      setUser(user);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  function logout() {\n    axios.post(\"/api/logout\").then(function () {\n      setUser(null);\n      setRunnerRuns(null);\n      setPlannerRuns(null);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  return {\n    login: login,\n    logout: logout\n  };\n}","map":{"version":3,"names":["axios","React","useState","useEffect","atom","useSetRecoilState","useRecoilValue","useRecoilState","userState","key","default","runsState","runnerRunsState","plannerRunsState","useAppData","runs","setRuns","runnerRuns","setRunnerRuns","plannerRuns","setPlannerRuns","user","setUser","Promise","all","get","then","response","data","console","log","catch","error","id","login","email","password","post","logout"],"sources":["/Users/mariannebourcier/werun/react-front-end/src/hooks/useAppData.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  atom,\n  useSetRecoilState,\n  useRecoilValue,\n  useRecoilState,\n} from \"recoil\";\n//hook for getting runs\n//hook for logged in user\n//hook for runner only runs\n//hook for planner runs\n//axios route change based on user id\n\nexport const userState = atom({\n  key: \"userState\",\n  default: null,\n});\n\nexport const runsState = atom({\n  key: \"runsState\",\n  default: null,\n});\n\nexport const runnerRunsState = atom({\n  key: \"runnerRunsState\",\n  default: null,\n});\n\nexport const plannerRunsState = atom({\n  key: \"plannerRunsState\",\n  default: null,\n});\n\nexport default function useAppData() {\n  const [runs, setRuns] = useRecoilState(runsState);\n  const [runnerRuns, setRunnerRuns] = useRecoilState(runnerRunsState);\n  const [plannerRuns, setPlannerRuns] = useRecoilState(plannerRunsState);\n  const [user, setUser] = useRecoilState(userState);\n\n  useEffect(() => {\n    Promise.all([axios.get(\"/api/runs\")])\n      .then((response) => {\n        const { runs } = response[0].data;\n        console.log(runs)\n        setRuns(runs);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      Promise.all([\n        axios.get(`/api/runs/runner/${user.id}`),\n        axios.get(`/api/runs/planner/${user.id}`),\n      ])\n        .then((response) => {\n          const { runnerRuns } = response[0].data;\n          const { plannerRuns } = response[1].data;\n          setRunnerRuns(runnerRuns);\n          setPlannerRuns(plannerRuns);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  }, [user]);\n\n  function login(email, password) {\n    axios\n      .post(\"/api/login\", { email, password })\n      .then((response) => {\n        const { user } = response.data;\n        setUser(user);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function logout() {\n    axios\n      .post(\"/api/logout\")\n      .then(() => {\n        setUser(null);\n        setRunnerRuns(null);\n        setPlannerRuns(null);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  return {\n    login,\n    logout,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}