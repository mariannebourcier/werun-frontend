{"ast":null,"code":"import _slicedToArray from \"/Users/mariannebourcier/werun/react-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mariannebourcier/werun/react-front-end/src/components/FindRun.jsx\";\n\n/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from \"react\";\nimport Run from \"./Run\";\nimport Map from \"./Map\";\nimport JoiningStatus from \"./JoiningStatus\";\nimport { useLoaderData, useNavigate } from \"react-router-dom\";\nimport { useRecoilValue } from \"recoil\";\nimport { userState, runsState } from \"../hooks/useAppData\";\nimport useAppData from \"../hooks/useAppData\";\nimport \"../components/FindRun.css\";\nexport default function FindRun() {\n  var _this = this;\n\n  var runs = useRecoilValue(runsState);\n  var user = useRecoilValue(userState);\n\n  var _useAppData = useAppData(),\n      joinRun = _useAppData.joinRun,\n      canJoinRun = _useAppData.canJoinRun;\n\n  var navigate = useNavigate();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      joinButtonPressed = _useState2[0],\n      setJoinButtonPressed = _useState2[1];\n\n  var _join = function join(user_id, run_id) {\n    // Check if joining is possible\n    if (!canJoinRun(run_id)) {\n      console.log(\"You cannot join this run.\");\n      navigate(\"/\");\n      return;\n    } // Join if possible\n\n\n    joinRun(user_id, run_id).then(function (response) {\n      if (response) {\n        setJoinButtonPressed(true); // navigate(\"/profile\");\n      }\n    });\n  };\n\n  var showAvailableRuns = function showAvailableRuns(runs, type) {\n    var runsArray = Object.values(runs);\n    return runsArray.map(function (run) {\n      return /*#__PURE__*/React.createElement(Run, {\n        key: run.id,\n        run: run,\n        type: type,\n        join: function join() {\n          return _join(user.id, run.id);\n        },\n        canJoinRun: canJoinRun,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n    id: \"find-run-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Map, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"All available runs you can join:\"), showAvailableRuns(runs, \"available\")), /*#__PURE__*/React.createElement(JoiningStatus, {\n    joinButtonPressed: joinButtonPressed,\n    setJoinButtonPressed: setJoinButtonPressed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"names":["React","useState","useEffect","Run","Map","JoiningStatus","useLoaderData","useNavigate","useRecoilValue","userState","runsState","useAppData","FindRun","runs","user","joinRun","canJoinRun","navigate","joinButtonPressed","setJoinButtonPressed","join","user_id","run_id","console","log","then","response","showAvailableRuns","type","runsArray","Object","values","map","run","id"],"sources":["/Users/mariannebourcier/werun/react-front-end/src/components/FindRun.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from \"react\";\nimport Run from \"./Run\";\nimport Map from \"./Map\";\nimport JoiningStatus from \"./JoiningStatus\";\nimport { useLoaderData, useNavigate } from \"react-router-dom\";\nimport { useRecoilValue } from \"recoil\";\nimport { userState, runsState } from \"../hooks/useAppData\";\nimport useAppData from \"../hooks/useAppData\";\nimport \"../components/FindRun.css\";\n\nexport default function FindRun() {\n  const runs = useRecoilValue(runsState);\n  const user = useRecoilValue(userState);\n  const { joinRun, canJoinRun } = useAppData();\n  const navigate = useNavigate();\n  const [joinButtonPressed, setJoinButtonPressed] = useState(false);\n\n  const join = (user_id, run_id) => {\n    // Check if joining is possible\n    if (!canJoinRun(run_id)) {\n      console.log(\"You cannot join this run.\");\n      navigate(\"/\");\n      return;\n    }\n    // Join if possible\n    joinRun(user_id, run_id).then((response) => {\n      if (response) {\n        setJoinButtonPressed(true);\n        // navigate(\"/profile\");\n      }\n    });\n  };\n\n  const showAvailableRuns = (runs, type) => {\n    const runsArray = Object.values(runs);\n    return runsArray.map((run) => {\n      return (\n        <Run\n          key={run.id}\n          run={run}\n          type={type}\n          join={() => join(user.id, run.id)}\n          canJoinRun={canJoinRun}\n        />\n      );\n    });\n  };\n\n  return (\n    <>\n      <section id=\"find-run-page\">\n        <Map />\n        <h1>All available runs you can join:</h1>\n        {showAvailableRuns(runs, \"available\")}\n      </section>\n      <JoiningStatus\n        joinButtonPressed={joinButtonPressed}\n        setJoinButtonPressed={setJoinButtonPressed}\n      />\n    </>\n  );\n}\n"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,aAAT,EAAwBC,WAAxB,QAA2C,kBAA3C;AACA,SAASC,cAAT,QAA+B,QAA/B;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,qBAArC;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAO,2BAAP;AAEA,eAAe,SAASC,OAAT,GAAmB;EAAA;;EAChC,IAAMC,IAAI,GAAGL,cAAc,CAACE,SAAD,CAA3B;EACA,IAAMI,IAAI,GAAGN,cAAc,CAACC,SAAD,CAA3B;;EAFgC,kBAGAE,UAAU,EAHV;EAAA,IAGxBI,OAHwB,eAGxBA,OAHwB;EAAA,IAGfC,UAHe,eAGfA,UAHe;;EAIhC,IAAMC,QAAQ,GAAGV,WAAW,EAA5B;;EAJgC,gBAKkBN,QAAQ,CAAC,KAAD,CAL1B;EAAA;EAAA,IAKzBiB,iBALyB;EAAA,IAKNC,oBALM;;EAOhC,IAAMC,KAAI,GAAG,SAAPA,IAAO,CAACC,OAAD,EAAUC,MAAV,EAAqB;IAChC;IACA,IAAI,CAACN,UAAU,CAACM,MAAD,CAAf,EAAyB;MACvBC,OAAO,CAACC,GAAR,CAAY,2BAAZ;MACAP,QAAQ,CAAC,GAAD,CAAR;MACA;IACD,CAN+B,CAOhC;;;IACAF,OAAO,CAACM,OAAD,EAAUC,MAAV,CAAP,CAAyBG,IAAzB,CAA8B,UAACC,QAAD,EAAc;MAC1C,IAAIA,QAAJ,EAAc;QACZP,oBAAoB,CAAC,IAAD,CAApB,CADY,CAEZ;MACD;IACF,CALD;EAMD,CAdD;;EAgBA,IAAMQ,iBAAiB,GAAG,SAApBA,iBAAoB,CAACd,IAAD,EAAOe,IAAP,EAAgB;IACxC,IAAMC,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAclB,IAAd,CAAlB;IACA,OAAOgB,SAAS,CAACG,GAAV,CAAc,UAACC,GAAD,EAAS;MAC5B,oBACE,oBAAC,GAAD;QACE,GAAG,EAAEA,GAAG,CAACC,EADX;QAEE,GAAG,EAAED,GAFP;QAGE,IAAI,EAAEL,IAHR;QAIE,IAAI,EAAE;UAAA,OAAMR,KAAI,CAACN,IAAI,CAACoB,EAAN,EAAUD,GAAG,CAACC,EAAd,CAAV;QAAA,CAJR;QAKE,UAAU,EAAElB,UALd;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADF;IASD,CAVM,CAAP;EAWD,CAbD;;EAeA,oBACE,uDACE;IAAS,EAAE,EAAC,eAAZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,GAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,eAEE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,sCAFF,EAGGW,iBAAiB,CAACd,IAAD,EAAO,WAAP,CAHpB,CADF,eAME,oBAAC,aAAD;IACE,iBAAiB,EAAEK,iBADrB;IAEE,oBAAoB,EAAEC,oBAFxB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EANF,CADF;AAaD"},"metadata":{},"sourceType":"module"}